<!DOCTYPE html>
<html>
	<head>
		<title>Polygen</title>
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<link rel="stylesheet" type="text/css" href="css/popup.css" />
		<link rel="stylesheet" type="text/css" href="css/loader.css" />
		<link rel="stylesheet" type="text/css" href="css/desktop.css" />

		<link rel="shortcut icon" href="./images/icon.png" type="image/x-icon" />

		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
	</head>
	<body>
		<a class="downloader"></a>

		<header>
			<div class="logo">
				<div class="logo-img"></div>
				<p class="logo-text">POLYGEN</p>
			</div>
			<div class="download">
				EXPORT
				<svg viewBox="0 0 24 24">
					<path fill="currentColor" d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
				</svg>

				
				<div class="download-dropdown">
					<div class="download-as-png">PNG
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
							<path fill="currentColor" d="M19,19H5V5H19M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M13.96,12.29L11.21,15.83L9.25,13.47L6.5,17H17.5L13.96,12.29Z" />
						</svg>
					</div>
					<div class="download-as-svg">SVG
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
							<path fill="currentColor" d="M14 2H6C4.89 2 4 2.9 4 4V20C4 21.11 4.89 22 6 22H18C19.11 22 20 21.11 20 20V8L14 2M18 20H6V4H13V9H18V20M9.54 15.65L11.63 17.74L10.35 19L7 15.65L10.35 12.3L11.63 13.56L9.54 15.65M17 15.65L13.65 19L12.38 17.74L14.47 15.65L12.38 13.56L13.65 12.3L17 15.65Z" />
						</svg>
					</div>
				</div>
			</div>
		</header>

		<div class="controls">
			<div class="control control-tabs">
				<div class="control-tab-wrap">
					<div class="choose-properties btn-active">Properties</div>
					<div class="choose-tools">Editor</div>
				</div>
			</div>

			<div class="panel panel-image-tools">
				<div class="help-info">
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
						<title>Help</title>
						<path fill="currentColor" d="M11 9H13V7H11V9M14 17V15H13V11H10V13H11V15H10V17H14M5 3H19C20.1 3 21 3.89 21 5V19C21 19.53 20.79 20.04 20.41 20.41C20.04 20.79 19.53 21 19 21H5C4.47 21 3.96 20.79 3.59 20.41C3.21 20.04 3 19.53 3 19V5C3 3.89 3.89 3 5 3M19 19V5H5V19H19Z" />
					</svg>
				</div>
				<div class="control control-btns brush-toggle">
					<p class="control-header-reduce-mtop">TOOLS</p>
					<div class="control-btn-wrap btn-wrap-no-bottom-margin">
						<div class="tool tool-select" id="editor-select" title="Select vertices">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
								<path fill="currentColor" d="M13,17H17V13H19V17H23V19H19V23H17V19H13V17M11,17V19H9V17H11M7,17V19H5V17H7M19,9V11H17V9H19M19,5V7H17V5H19M15,5V7H13V5H15M11,5V7H9V5H11M7,5V7H5V5H7M7,13V15H5V13H7M7,9V11H5V9H7Z" />
							</svg>
						</div>
						<div class="tool tool-add-vertex" title="Add vertices">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
								<path fill="currentColor" d="M17,15.7V13H19V17L10,21L3,14L7,5H11V7H8.3L5.4,13.6L10.4,18.6L17,15.7M22,5V7H19V10H17V7H14V5H17V2H19V5H22Z" />
							</svg>
						</div>
					</div>
					<div class="control-btn-wrap btn-wrap-no-bottom-margin">
						<div class="tool tool-move" id="editor-move" title="Move vertices">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
								<path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z" />
							</svg>
						</div>
						<div class="btn-wrap-spacer"></div>
					</div>
					<p>ACTIONS</p>
					<div class="control-btn-wrap btn-wrap-no-bottom-margin">
						<div class="tool tool-deselect" id="editor-deselect-all" title="Clear vertex selection">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
								<path fill="currentColor" d="M21 20C21 20.55 20.55 21 20 21H19V19H21V20M15 21V19H17V21H15M11 21V19H13V21H11M7 21V19H9V21H7M4 21C3.45 21 3 20.55 3 20V19H5V21H4M3 15H5V17H3V15M21 15V17H19V15H21M14.59 8L12 10.59L9.41 8L8 9.41L10.59 12L8 14.59L9.41 16L12 13.41L14.59 16L16 14.59L13.41 12L16 9.41L14.59 8M3 11H5V13H3V11M21 11V13H19V11H21M3 7H5V9H3V7M21 7V9H19V7H21M4 3H5V5H3V4C3 3.45 3.45 3 4 3M20 3C20.55 3 21 3.45 21 4V5H19V3H20M15 5V3H17V5H15M11 5V3H13V5H11M7 5V3H9V5H7Z" />
							</svg>
						</div>
						
						<div class="tool-tool-delete-vertices" title="Delete selected vertices">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
								<path fill="currentColor" d="M13 19C13 18.7 13 18.3 13.1 18H8V16H6V8H8V6H16V8H18V13.1C18.3 13 18.7 13 19 13C19.3 13 19.7 13 20 13.1V8H22V2H16V4H8V2H2V8H4V16H2V22H8V20H13.1C13 19.7 13 19.3 13 19M18 4H20V6H18V4M4 4H6V6H4V4M6 20H4V18H6V20M22.5 16.9L20.4 19L22.5 21.1L21.1 22.5L19 20.4L16.9 22.5L15.5 21.1L17.6 19L15.5 16.9L16.9 15.5L19 17.6L21.1 15.5L22.5 16.9Z" />
							</svg>
						</div>
					</div>
					<div class="control-btn-wrap btn-wrap-no-bottom-margin">
						<div class="tool tool-recalculate" title="Recalculate vertex position">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
								<path fill="currentColor" d="M2,2V8H4.28L5.57,16H4V22H10V20.06L15,20.05V22H21V16H19.17L20,9H22V3H16V6.53L14.8,8H9.59L8,5.82V2M4,4H6V6H4M18,5H20V7H18M6.31,8H7.11L9,10.59V14H15V10.91L16.57,9H18L17.16,16H15V18.06H10V16H7.6M11,10H13V12H11M6,18H8V20H6M17,18H19V20H17" />
							</svg>
						</div>
						<div class="tool tool-move-to-line" title="Move vertices to nearby color boundaries">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
								<path fill="currentColor" d="M19,16V13H23V11H19V8L15,12L19,16M5,8V11H1V13H5V16L9,12L5,8M11,20H13V4H11V20Z" />
							</svg>
						</div>
					</div>
				</div>

				<div class="control control-range vertex-prop-falloff">
					<p>PROPORTIONAL FALLOFF</p>
					<input type="range" class="prop-falloff control-slider" min="0" max="10" step="1" value="0" />
				</div>

				<div class="control control-inputs settings-undo-stack">
					<p>UNDO LIMIT [u]</p>
					<div class="control-input-wrap">
						<input type="number" class="undo-limit" placeholder="Undo Limit" value="5" />
					</div>
				</div>

				<div class="control control-color selected-vertex-color">
					<p>SELECTION COLOR</p>
					<div class="vertex-color-wrap">
						<input type="color" value="#ffffff" class="v-outline-color" id="editor-selected-color" />
					</div>
				</div>

				<div class="control control-list vertex-layer">
					<p>LAYERS</p>
					<template id="layer-template">
						<div class="vertex-layer layer-active layer-wrap">
							<span class="layer-name"></span>
							<div class="layer-btn-wrap">
								<svg class="layer-visible" viewBox="0 0 24 24"><title>Hide Layer</title><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>
								<svg class="layer-hidden" viewBox="0 0 24 24"><title>Show Layer</title><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>
								<svg class="layer-delete" viewBox="0 0 24 24"><title>Delete Layer</title><path fill="currentColor" d="M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M9,8H11V17H9V8M13,8H15V17H13V8Z" /></svg>
							</div>
						</div>
					</template>
					<div class="layer-add">
						<svg viewBox="0 0 24 24">
							<path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />
						</svg>
					</div>
				</div>
			</div>

			<div class="panel panel-image-properties">

				<div class="control control-inputs dimensions">
					<p>DIMENSIONS</p>
					<div class="control-input-wrap">
						<input type="number" class="image-dimensions image-width" placeholder="Width" value="1920" />
						<input type="number" class="image-dimensions image-height" placeholder="Height" value="1080" />
					</div>
				</div>
				<div class="control control-btns type">
					<p>TYPE</p>
					<div class="control-btn-wrap">
						<div class="type-btn type-linear type-0 btn-active">Linear</div>
						<div class="type-btn type-radial type-1">Radial</div>
						<div class="type-btn type-image type-2">Image</div>
					</div>
				</div>

				<div class="control control-file image-file fortype-2">
					<p>ORIGINAL IMAGE</p>
					<div class="control-btn-wrap">
						<div class="file-choose">Choose File</div>
					</div>
				</div>

				<div class="control control-range variance">
					<p>VERTEX VARIANCE</p>
					<div class="control-range-flex-wrap">
						<input type="range" class="i-variance control-slider" min="0" max="1" step="0.01" value="0.4" />
						<div class="range-button-companion variance-reseed">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
								<title>Refresh Randomness</title>
								<path fill="currentColor" d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z" />
							</svg>
						</div>
					</div>
				</div>
				<div class="control control-range verts">
					<p>CELL SIZE</p>
					<input type="range" class="i-verts control-slider" min="30" max="200" step="0.5" value="100" />
				</div>
				<div class="control control-range bright-variance">
					<p>BRIGHTNESS VARIANCE</p>
					<input type="range" class="i-bright-variance control-slider" min="0" max="255" step="1" value="0" />
				</div>
				<div class="control control-btns brightness-mode">
					<p>BRIGHTNESS VARIANCE MODE</p>
					<div class="control-btn-wrap">
						<div class="bmode-btn lighten">Lighten</div>
						<div class="bmode-btn darken btn-active">Darken</div>
					</div>
				</div>

				<div class="control control-range grad-rotation fortype-0">
					<p>GRADIENT ROTATION</p>
					<input type="range" class="i-0-rotation control-slider" min="0" max="360" step="1" value="0" />
				</div>
				<div class="control control-btns grad-rotation-snap fortype-0">
					<p>GRADIENT ROTATION SNAP</p>
					<div class="control-btn-wrap btn-wrap-no-bottom-margin">
						<div class="rot-snap snap-0"></div>
						<div class="rot-snap snap-1"></div>
						<div class="rot-snap snap-2"></div>
						<div class="rot-snap snap-3"></div>
					</div>
					<div class="control-btn-wrap">
						<div class="rot-snap snap-4"></div>
						<div class="rot-snap snap-5"></div>
						<div class="rot-snap snap-6"></div>
						<div class="rot-snap snap-7"></div>
					</div>
				</div>

				<div class="control control-range grad-posx fortype-1">
					<p>GRADIENT POSITION X</p>
					<input type="range" class="i-1-posx control-slider" min="0" max="1" step="0.01" value="0.5" />
				</div>
				<div class="control control-range grad-posy fortype-1">
					<p>GRADIENT POSITION Y</p>
					<input type="range" class="i-1-posy control-slider" min="0" max="1" step="0.01" value="0.5" />
				</div>
				<div class="control control-range grad-outrad fortype-1">
					<p>GRADIENT OUTER RADIUS</p>
					<input type="range" class="i-1-outrad control-slider" min="0" max="1" step="0.01" value="0.5" />
				</div>
				<div class="control control-range grad-inrad fortype-1">
					<p>GRADIENT INNER RADIUS</p>
					<input type="range" class="i-1-inrad control-slider" min="0" max="0.25" step="0.01" value="0" />
				</div>
				<div class="control control-color outline-color">
					<p>OUTLINE COLOR</p>
					<div class="outline-color-wrap">
						<input type="color" value="#ffffff" class="i-outline-color" />
					</div>
				</div>
				<div class="control control-range outline-opacity">
					<p>OUTLINE WEIGHT</p>
					<input type="range" class="i-outline control-slider" min="0" max="10" step="1" value="0" />
				</div>
				<div class="control control-palettes fortype-0 fortype-1">
					<p>COLOR PALETTE</p>
					<div class="palette-add">
						<svg viewBox="0 0 24 24">
							<path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />
						</svg>
					</div>
				</div>
			</div>
		</div>

		<div class="preview">
			<div class="loader-wrap">
				<div id="loader-title">Processing Image</div>
				<div id="loader-progress"></div>
			</div>
		</div>

		<template id="gradient-editor-popup">
			<div class="popup-bg">
				<div class="popup gradient-editor-popup">
					<div class="popup-title">
						<span class="popup-title-text">[POPUP TITLE]</span>
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="popup-close">
							<title>Close</title>
							<path fill="currentColor" d="M20 6.91L17.09 4L12 9.09L6.91 4L4 6.91L9.09 12L4 17.09L6.91 20L12 14.91L17.09 20L20 17.09L14.91 12L20 6.91Z" />
						</svg>
					</div>
					<div class="popup-body">
						<div class="gradient-editor-body-wrap">
							<canvas class="gradient-editor-preview"></canvas>
							<div class="gradient-editor-stop-wrap">
								<input type="range" class="popup-add-color-stop" step="0.01" min="0" max="1" title="Add New Color Stop">
							</div>
						</div>
					</div>
		
					<div class="popup-button-wrap">
                        <button class="popup-space-stops">Even Spacing</button>
						<button class="popup-cancel">Cancel</button>
						<button class="popup-save">Save</button>
					</div>
				</div>
			</div>
		</template>

		<template id="confirm-popup">
			<div class="popup-bg">
				<div class="popup">
					<div class="popup-title">
						<span class="popup-title-text">[POPUP TITLE]</span>
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="popup-close">
							<title>Close</title>
							<path fill="currentColor" d="M20 6.91L17.09 4L12 9.09L6.91 4L4 6.91L9.09 12L4 17.09L6.91 20L12 14.91L17.09 20L20 17.09L14.91 12L20 6.91Z" />
						</svg>
					</div>
					<div class="popup-body">
						<p class="popup-body-text"></p>
					</div>
					<div class="popup-button-wrap">
						<button class="popup-cancel">Cancel</button>
						<button class="popup-save">OK</button>
					</div>
				</div>
			</div>
		</template>

		<template id="popup-color-picker-stop-edit">
			<div id="popup-stop-controls-wrap">
				<div class="popup-color-picker-wrap">
					<svg xmlns="http://www.w3.org/2000/svg" class="popup-color-picker-bucket-icon" viewBox="0 -1 24 20"><title>Select Color</title><path fill="currentColor" d="M19,11.5C19,11.5 17,13.67 17,15A2,2 0 0,0 19,17A2,2 0 0,0 21,15C21,13.67 19,11.5 19,11.5M5.21,10L10,5.21L14.79,10M16.56,8.94L7.62,0L6.21,1.41L8.59,3.79L3.44,8.94C2.85,9.5 2.85,10.47 3.44,11.06L8.94,16.56C9.23,16.85 9.62,17 10,17C10.38,17 10.77,16.85 11.06,16.56L16.56,11.06C17.15,10.47 17.15,9.5 16.56,8.94Z" /></svg>
					<input type="color" class="popup-color-picker-input">
				</div>
				<div class="popup-color-stop-delete">
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>Delete Color Stop</title><path fill="currentColor" d="M20.37,8.91L19.37,10.64L7.24,3.64L8.24,1.91L11.28,3.66L12.64,3.29L16.97,5.79L17.34,7.16L20.37,8.91M6,19V7H11.07L18,11V19A2,2 0 0,1 16,21H8A2,2 0 0,1 6,19M8,19H16V12.2L10.46,9H8V19Z" /></svg>
				</div>
			</div>
		</template>

		<template style="display: none" id="_JS_TEMPLATES">
			<template id="PALETTE_CONTROLS">
				<svg viewBox="0 0 24 24"><path fill="currentColor" d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" /></svg>
			</template>
			<template id="EDITOR_HELP_BODY">
				<div class="help-text">
					<p>Use the tools here to make adjustments to vertices. Note that adjusting settings in the Properties pane after making adjustments here will override the adjustments.</p>
					<br/>
					<h3>TOOLS</h3>
					<p><span class="help-section">Select Vertices:</span> Draw a selection rectangle. Hold SHIFT or CTRL to add to the existing selection. Press either button to highlight the current selection. Click away to hide the selection.</p>
					<p><span class="help-section">Add vertices:</span> Create custom vertices. Note that you must create new, custom polygons instead of editing the vertex count of existing ones.</p>
					<p><span class="help-section">Move vertices:</span> Drag the selection. Use the proportional falloff slider to adjust the radius from the mouse of vertices that are affected by the drag movement.</p>
					<h3>ACTIONS</h3>
					<p><span class="help-section">Clear vertex selection:</span> Deselect all selected vertices.</p>
					<p><span class="help-section">Delete selected vertices:</span> Delete the vertices in the selection and dissolve their corresponding polygons.</p>
					<p><span class="help-section">Recalculate vertex position:</span> Regenerates selected vertices with a new random offset.</p>
					<p><span class="help-section">Move vertices to nearby color boundaries:</span> Uses a software line detection algorithm to detect lines in the underlying gradient or image, and moves vertices to detected lines if close enough. Best used with high-contrast images. Images with high resolutions will be slow.</p>

					<h3>OTHER</h3>
					<p><span class="help-section">Proportional falloff:</span> Adjust the radius from the mouse of vertices that are affected by manually dragging.</p>
					<p><span class="help-section">Undo limit:</span> Set the number of vertex states to save to be able to revert to. Press "CTRL + Z" to undo.</p>
					<p><span class="help-section">Selection color:</span> Set the color of the selection box and the displayed vertices.</p>
					<p><span class="help-section">Layers:</span> Use layers to create different canvases with unique settings. Best used by deleting vertices of higher layers to allow lower layers to be visible.</p>
				</div>
			</template>
		</template>

	</body>

	<script src="javascript/script.js" type="module"></script>
</html>
